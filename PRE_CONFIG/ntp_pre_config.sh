#!/bin/bash

#-----------------------------------------------------------------------------------------------------------------------------------------
#  [PRE-CONFIG] Test NTP.X – 
#-----------------------------------------------------------------------------------------------------------------------------------------
function test_ntp_x(){
    print_info "\tReloading and Restarting NTP server [192.168.2.245] ..."
    service ntp reload
    service ntp restart
}

#-----------------------------------------------------------------------------------------------------------------------------------------
#  [PRE-CONFIG] Test NTP.1 – Synchronization to external servers
#-----------------------------------------------------------------------------------------------------------------------------------------

function test_ntp_1_1_pre_config(){

    test_ntp_x
}

#-----------------------------------------------------------------------------------------------------------------------------------------
#  [PRE-CONFIG] Test NTP.2 – NTP broadcast
#-----------------------------------------------------------------------------------------------------------------------------------------

function test_ntp_2_1_pre_config(){

    test_ntp_x
}

#-----------------------------------------------------------------------------------------------------------------------------------------
#  [PRE-CONFIG] Test NTP.3 – NTP multicast
#-----------------------------------------------------------------------------------------------------------------------------------------

function test_ntp_3_1_pre_config(){

    test_ntp_x
}

#-----------------------------------------------------------------------------------------------------------------------------------------
#  [PRE-CONFIG] Test NTP.4 – NTP manycast
#-----------------------------------------------------------------------------------------------------------------------------------------

function test_ntp_4_1_pre_config(){

    test_ntp_x
}

#-----------------------------------------------------------------------------------------------------------------------------------------
#  [PRE-CONFIG] Test NTP.5 – NTP servers with authentication (Symmetric/Private Key)
#-----------------------------------------------------------------------------------------------------------------------------------------

function test_ntp_5_1_pre_config(){

    test_ntp_x
}


#-----------------------------------------------------------------------------------------------------------------------------------------
#  [PRE-CONFIG] Test NTP.6 – NTP leap second handling
#-----------------------------------------------------------------------------------------------------------------------------------------

function test_ntp_6_1_pre_config(){
test_ntp_x
print_info "\tSending [test_leap_seconds.list] to the DUT (/media/files_exchange)"
cd FILES_EXCHANGE/NTP
sshpass -p $password scp -o StrictHostKeyChecking=no -r test_leap_seconds.list $username@$ip:/media/files_exchange > /dev/null 2>&1
cd ../..
}

function test_ntp_6_2_pre_config(){
test_ntp_x
print_info "\tSending [real_leap_seconds.list] to the DUT (/media/files_exchange)"
cd FILES_EXCHANGE/NTP
sshpass -p $password scp -o StrictHostKeyChecking=no -r real_leap_seconds.list $username@$ip:/media/files_exchange > /dev/null 2>&1
cd ../..
}

