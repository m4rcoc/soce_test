#!/bin/bash

function 8021qbv_reset(){

cat <<-EOF > cmds/${test_function}_dut_config_restore.cmd
echo $password | sudo -S cp /etc/soce_design/factory_config/SWITCH/ieee802_1Qbv.json /etc/soce_configs/current/SWITCH/ieee802_1Qbv.json
soce_cli
vlan reset SWITCH
ieee8021qbv reload_configuration SWITCH
EOF
}

# echo $password | sudo -S service phc2sys-master start

#-----------------------------------------------------------------------------------------------------------------------------------------
# Test 8021Qbv.1 – Configuration change time
#-----------------------------------------------------------------------------------------------------------------------------------------

function test_8021qbv_1_1(){

cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

# echo $password | sudo -S phc_ctl /dev/ptp0 set 0

function test_8021qbv_1_1_tsn_pcie(){

cat <<-EOF > cmds/${test_function}_dut_config.cmd
echo $password | sudo -S service phc2sys-master stop
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_entry SWITCH 1 1 $port_0_config,$port_1_config ""
vlan set_vlan_port $port_pcie_name 10 0 0 access all none original none none
vlan set_vlan_port $internal_port_name 10 0 0 access all none original none none
vlan set_vlan_entry SWITCH 10 10 $port_pcie_name,$internal_port_name ""
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}


function test_8021qbv_1_1_restore(){

    8021qbv_reset
}


function test_8021qbv_1_2_restore(){

    8021qbv_reset
}

function test_8021qbv_1_3(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
echo $password | sudo -S service phc2sys-master stop
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

function test_8021qbv_1_3_tsn_pcie(){

cat <<-EOF > cmds/${test_function}_dut_config.cmd
echo $password | sudo -S service phc2sys-master stop
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_entry SWITCH 1 1 $port_0_config,$port_1_config ""
vlan set_vlan_port $port_pcie_name 10 0 0 access all none original none none
vlan set_vlan_port $internal_port_name 10 0 0 access all none original none none
vlan set_vlan_entry SWITCH 10 10 $port_pcie_name,$internal_port_name ""
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

function test_8021qbv_1_3_restore(){

    8021qbv_reset
}


function test_8021qbv_1_4(){

cat <<-EOF > cmds/${test_function}_dut_config.cmd
echo $password | sudo -S service phc2sys-master stop
echo $password | sudo -S phc_ctl /dev/ptp0 set 0
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
echo $(date +%s) > cmds/tmp_elapsed_time.cmd
}

function test_8021qbv_1_4_tsn_pcie(){

cat <<-EOF > cmds/${test_function}_dut_config.cmd
echo $password | sudo -S service phc2sys-master stop
echo $password | sudo -S phc_ctl /dev/ptp0 set 0
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_entry SWITCH 1 1 $port_0_config,$port_1_config ""
vlan set_vlan_port $port_pcie_name 10 0 0 access all none original none none
vlan set_vlan_port $internal_port_name 10 0 0 access all none original none none
vlan set_vlan_entry SWITCH 10 10 $port_pcie_name,$internal_port_name ""
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
echo $(date +%s) > cmds/tmp_elapsed_time.cmd
}

function test_8021qbv_1_4_restore(){

    8021qbv_reset
}


#-----------------------------------------------------------------------------------------------------------------------------------------
# Test 8021Qbv.2 – Configuration change with existing configuration pending
#-----------------------------------------------------------------------------------------------------------------------------------------

# Admin base time = 0
function test_8021qbv_2_1(){

cat <<-EOF > cmds/${test_function}_dut_config.cmd
echo $password | sudo -S phc_ctl /dev/ptp0 set 0
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

function test_8021qbv_2_1_restore(){

    8021qbv_reset
}

# Admin base time = 1000
function test_8021qbv_2_2(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

# Admin base time = 100
function test_8021qbv_2_3(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
echo $(date +%s) > cmds/tmp_elapsed_time
}

function test_8021qbv_2_3_restore(){

    8021qbv_reset
}

#-----------------------------------------------------------------------------------------------------------------------------------------
# Test 8021Qbv.3 – Maximum gate control list entries
#-----------------------------------------------------------------------------------------------------------------------------------------

function test_8021qbv_3_1(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan reset SWITCH
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

# _tsn_pcie -> No compatible (se necesitan 3 puertos)

function test_8021qbv_3_1_restore(){

    8021qbv_reset
}

#-----------------------------------------------------------------------------------------------------------------------------------------
# Test 8021Qbv.4 – Gate operations
#-----------------------------------------------------------------------------------------------------------------------------------------

function test_8021qbv_4_1(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

function test_8021qbv_4_1_tsn_pcie(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_entry SWITCH 1 1 $port_0_config,$port_1_config ""
vlan set_vlan_port $port_pcie_name 10 0 0 access all none original none none
vlan set_vlan_port $internal_port_name 10 0 0 access all none original none none
vlan set_vlan_entry SWITCH 10 10 $port_pcie_name,$internal_port_name ""
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

function test_8021qbv_4_1_restore(){

    8021qbv_reset
}

function test_8021qbv_4_2(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

function test_8021qbv_4_2_tsn_pcie(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_entry SWITCH 1 1 $port_0_config,$port_1_config ""
vlan set_vlan_port $port_pcie_name 10 0 0 access all none original none none
vlan set_vlan_port $internal_port_name 10 0 0 access all none original none none
vlan set_vlan_entry SWITCH 10 10 $port_pcie_name,$internal_port_name ""
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

function test_8021qbv_4_2_restore(){

    8021qbv_reset
}


function test_8021qbv_4_3(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

function test_8021qbv_4_3_tsn_pcie(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_entry SWITCH 1 1 $port_0_config,$port_1_config ""
vlan set_vlan_port $port_pcie_name 10 0 0 access all none original none none
vlan set_vlan_port $internal_port_name 10 0 0 access all none original none none
vlan set_vlan_entry SWITCH 10 10 $port_pcie_name,$internal_port_name ""
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

function test_8021qbv_4_3_restore(){

    8021qbv_reset
}


function test_8021qbv_4_4(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

function test_8021qbv_4_4_tsn_pcie(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_entry SWITCH 1 1 $port_0_config,$port_1_config ""
vlan set_vlan_port $port_pcie_name 10 0 0 access all none original none none
vlan set_vlan_port $internal_port_name 10 0 0 access all none original none none
vlan set_vlan_entry SWITCH 10 10 $port_pcie_name,$internal_port_name ""
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

function test_8021qbv_4_4_restore(){

    8021qbv_reset
}

function test_8021qbv_4_5(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

function test_8021qbv_4_5_tsn_pcie(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_entry SWITCH 1 1 $port_0_config,$port_1_config ""
vlan set_vlan_port $port_pcie_name 10 0 0 access all none original none none
vlan set_vlan_port $internal_port_name 10 0 0 access all none original none none
vlan set_vlan_entry SWITCH 10 10 $port_pcie_name,$internal_port_name ""
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

function test_8021qbv_4_5_restore(){

    8021qbv_reset
}

function test_8021qbv_4_6(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

function test_8021qbv_4_6_tsn_pcie(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_entry SWITCH 1 1 $port_0_config,$port_1_config ""
vlan set_vlan_port $port_pcie_name 10 0 0 access all none original none none
vlan set_vlan_port $internal_port_name 10 0 0 access all none original none none
vlan set_vlan_entry SWITCH 10 10 $port_pcie_name,$internal_port_name ""
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

function test_8021qbv_4_6_restore(){

    8021qbv_reset
}

function test_8021qbv_4_7(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

function test_8021qbv_4_7_tsn_pcie(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_entry SWITCH 1 1 $port_0_config,$port_1_config ""
vlan set_vlan_port $port_pcie_name 10 0 0 access all none original none none
vlan set_vlan_port $internal_port_name 10 0 0 access all none original none none
vlan set_vlan_entry SWITCH 10 10 $port_pcie_name,$internal_port_name ""
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

function test_8021qbv_4_7_restore(){

    8021qbv_reset
}

function test_8021qbv_4_8(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

function test_8021qbv_4_8_tsn_pcie(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_entry SWITCH 1 1 $port_0_config,$port_1_config ""
vlan set_vlan_port $port_pcie_name 10 0 0 access all none original none none
vlan set_vlan_port $internal_port_name 10 0 0 access all none original none none
vlan set_vlan_entry SWITCH 10 10 $port_pcie_name,$internal_port_name ""
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

function test_8021qbv_4_8_restore(){

    8021qbv_reset
}

#-----------------------------------------------------------------------------------------------------------------------------------------
# Test 8021Qbv.5 – Cycle time and sum of time slot intervals
#-----------------------------------------------------------------------------------------------------------------------------------------

function test_8021qbv_5_1(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

function test_8021qbv_5_1_tsn_pcie(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_entry SWITCH 1 1 $port_0_config,$port_1_config ""
vlan set_vlan_port $port_pcie_name 10 0 0 access all none original none none
vlan set_vlan_port $internal_port_name 10 0 0 access all none original none none
vlan set_vlan_entry SWITCH 10 10 $port_pcie_name,$internal_port_name ""
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

function test_8021qbv_5_1_restore(){

    8021qbv_reset
}


function test_8021qbv_5_2(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

function test_8021qbv_5_2_tsn_pcie(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_entry SWITCH 1 1 $port_0_config,$port_1_config ""
vlan set_vlan_port $port_pcie_name 10 0 0 access all none original none none
vlan set_vlan_port $internal_port_name 10 0 0 access all none original none none
vlan set_vlan_entry SWITCH 10 10 $port_pcie_name,$internal_port_name ""
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

function test_8021qbv_5_2_restore(){

    8021qbv_reset
}


function test_8021qbv_5_3(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

function test_8021qbv_5_3_tsn_pcie(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_entry SWITCH 1 1 $port_0_config,$port_1_config ""
vlan set_vlan_port $port_pcie_name 10 0 0 access all none original none none
vlan set_vlan_port $internal_port_name 10 0 0 access all none original none none
vlan set_vlan_entry SWITCH 10 10 $port_pcie_name,$internal_port_name ""
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

function test_8021qbv_5_3_restore(){

    8021qbv_reset
}


#-----------------------------------------------------------------------------------------------------------------------------------------
# Test 8021Qbv.6 – Minimum and maximum cycle time
#-----------------------------------------------------------------------------------------------------------------------------------------

function test_8021qbv_6_1(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

function test_8021qbv_6_1_tsn_pcie(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_entry SWITCH 1 1 $port_0_config,$port_1_config ""
vlan set_vlan_port $port_pcie_name 10 0 0 access all none original none none
vlan set_vlan_port $internal_port_name 10 0 0 access all none original none none
vlan set_vlan_entry SWITCH 10 10 $port_pcie_name,$internal_port_name ""
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

function test_8021qbv_6_1_restore(){

    8021qbv_reset
}

function test_8021qbv_6_2(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

function test_8021qbv_6_2_tsn_pcie(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_entry SWITCH 1 1 $port_0_config,$port_1_config ""
vlan set_vlan_port $port_pcie_name 10 0 0 access all none original none none
vlan set_vlan_port $internal_port_name 10 0 0 access all none original none none
vlan set_vlan_entry SWITCH 10 10 $port_pcie_name,$internal_port_name ""
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

function test_8021qbv_6_2_restore(){

    8021qbv_reset
}

function test_8021qbv_6_3(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

function test_8021qbv_6_3_tsn_pcie(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_entry SWITCH 1 1 $port_0_config,$port_1_config ""
vlan set_vlan_port $port_pcie_name 10 0 0 access all none original none none
vlan set_vlan_port $internal_port_name 10 0 0 access all none original none none
vlan set_vlan_entry SWITCH 10 10 $port_pcie_name,$internal_port_name ""
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

function test_8021qbv_6_3_restore(){

    8021qbv_reset
}

function test_8021qbv_6_4(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

function test_8021qbv_6_4_tsn_pcie(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_entry SWITCH 1 1 $port_0_config,$port_1_config ""
vlan set_vlan_port $port_pcie_name 10 0 0 access all none original none none
vlan set_vlan_port $internal_port_name 10 0 0 access all none original none none
vlan set_vlan_entry SWITCH 10 10 $port_pcie_name,$internal_port_name ""
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

function test_8021qbv_6_4_restore(){

    8021qbv_reset
}

function test_8021qbv_6_5(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

function test_8021qbv_6_5_tsn_pcie(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_entry SWITCH 1 1 $port_0_config,$port_1_config ""
vlan set_vlan_port $port_pcie_name 10 0 0 access all none original none none
vlan set_vlan_port $internal_port_name 10 0 0 access all none original none none
vlan set_vlan_entry SWITCH 10 10 $port_pcie_name,$internal_port_name ""
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

function test_8021qbv_6_5_restore(){

    8021qbv_reset
}

function test_8021qbv_6_6(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

function test_8021qbv_6_6_tsn_pcie(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_entry SWITCH 1 1 $port_0_config,$port_1_config ""
vlan set_vlan_port $port_pcie_name 10 0 0 access all none original none none
vlan set_vlan_port $internal_port_name 10 0 0 access all none original none none
vlan set_vlan_entry SWITCH 10 10 $port_pcie_name,$internal_port_name ""
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

function test_8021qbv_6_6_restore(){

    8021qbv_reset
}

function test_8021qbv_6_7(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

function test_8021qbv_6_7_tsn_pcie(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_entry SWITCH 1 1 $port_0_config,$port_1_config ""
vlan set_vlan_port $port_pcie_name 10 0 0 access all none original none none
vlan set_vlan_port $internal_port_name 10 0 0 access all none original none none
vlan set_vlan_entry SWITCH 10 10 $port_pcie_name,$internal_port_name ""
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

function test_8021qbv_6_7_restore(){

    8021qbv_reset
}

function test_8021qbv_6_8(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

function test_8021qbv_6_8_tsn_pcie(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_entry SWITCH 1 1 $port_0_config,$port_1_config ""
vlan set_vlan_port $port_pcie_name 10 0 0 access all none original none none
vlan set_vlan_port $internal_port_name 10 0 0 access all none original none none
vlan set_vlan_entry SWITCH 10 10 $port_pcie_name,$internal_port_name ""
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

function test_8021qbv_6_8_restore(){

    8021qbv_reset
}

function test_8021qbv_6_9(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

function test_8021qbv_6_9_tsn_pcie(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_entry SWITCH 1 1 $port_0_config,$port_1_config ""
vlan set_vlan_port $port_pcie_name 10 0 0 access all none original none none
vlan set_vlan_port $internal_port_name 10 0 0 access all none original none none
vlan set_vlan_entry SWITCH 10 10 $port_pcie_name,$internal_port_name ""
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

function test_8021qbv_6_9_restore(){

    8021qbv_reset
}

#-----------------------------------------------------------------------------------------------------------------------------------------
# Test 8021Qbv.7 – Multiple streams with different priorities
#-----------------------------------------------------------------------------------------------------------------------------------------

function test_8021qbv_7_1(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

function test_8021qbv_7_1_restore(){

    8021qbv_reset
}

#-----------------------------------------------------------------------------------------------------------------------------------------
# Test 8021Qbv.8 – Dedicated buffer verification
#-----------------------------------------------------------------------------------------------------------------------------------------

function test_8021qbv_8_1(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

function test_8021qbv_8_1_restore(){

    8021qbv_reset
}

#-----------------------------------------------------------------------------------------------------------------------------------------
# Test 8021Qbv.9 – Control list execution
#-----------------------------------------------------------------------------------------------------------------------------------------

function test_8021qbv_9_1(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

function test_8021qbv_9_1_tsn_pcie(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_entry SWITCH 1 1 $port_0_config,$port_1_config ""
vlan set_vlan_port $port_pcie_name 10 0 0 access all none original none none
vlan set_vlan_port $internal_port_name 10 0 0 access all none original none none
vlan set_vlan_entry SWITCH 10 10 $port_pcie_name,$internal_port_name ""
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}


function test_8021qbv_9_1_restore(){

    8021qbv_reset
}

#-----------------------------------------------------------------------------------------------------------------------------------------
# Test 8021Qbv.10 – Change in 802.1AS timer
#-----------------------------------------------------------------------------------------------------------------------------------------

function test_8021qbv_10_1(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

function test_8021qbv_10_1_tsn_pcie(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_entry SWITCH 1 1 $port_0_config,$port_1_config ""
vlan set_vlan_port $port_pcie_name 10 0 0 access all none original none none
vlan set_vlan_port $internal_port_name 10 0 0 access all none original none none
vlan set_vlan_entry SWITCH 10 10 $port_pcie_name,$internal_port_name ""
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

function test_8021qbv_10_1_restore(){

    8021qbv_reset
}

function test_8021qbv_10_2(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
echo $password | sudo -S phc_ctl /dev/ptp0 set 0
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

function test_8021qbv_10_2_tsn_pcie(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
echo $password | sudo -S phc_ctl /dev/ptp0 set 0
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_entry SWITCH 1 1 $port_0_config,$port_1_config ""
vlan set_vlan_port $port_pcie_name 10 0 0 access all none original none none
vlan set_vlan_port $internal_port_name 10 0 0 access all none original none none
vlan set_vlan_entry SWITCH 10 10 $port_pcie_name,$internal_port_name ""
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

function test_8021qbv_10_2_restore(){

    8021qbv_reset
}

function test_8021qbv_10_3(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
echo $password | sudo -S phc_ctl /dev/ptp0 set 10000
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

function test_8021qbv_10_3_tsn_pcie(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
echo $password | sudo -S phc_ctl /dev/ptp0 set 10000
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_entry SWITCH 1 1 $port_0_config,$port_1_config ""
vlan set_vlan_port $port_pcie_name 10 0 0 access all none original none none
vlan set_vlan_port $internal_port_name 10 0 0 access all none original none none
vlan set_vlan_entry SWITCH 10 10 $port_pcie_name,$internal_port_name ""
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

function test_8021qbv_10_3_restore(){

    8021qbv_reset
}

#-----------------------------------------------------------------------------------------------------------------------------------------
# Test 8021Qbv.11 – Change in 802.1AS timer with configuration pending
#-----------------------------------------------------------------------------------------------------------------------------------------

function test_8021qbv_11_1(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
echo $password | sudo -S phc_ctl /dev/ptp0 set 0
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

function test_8021qbv_11_1_tsn_pcie(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
echo $password | sudo -S phc_ctl /dev/ptp0 set 0
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_entry SWITCH 1 1 $port_0_config,$port_1_config ""
vlan set_vlan_port $port_pcie_name 10 0 0 access all none original none none
vlan set_vlan_port $internal_port_name 10 0 0 access all none original none none
vlan set_vlan_entry SWITCH 10 10 $port_pcie_name,$internal_port_name ""
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

function test_8021qbv_11_1_restore(){

    8021qbv_reset
}

function test_8021qbv_11_2(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
echo $password | sudo -S phc_ctl /dev/ptp0 set 0
soce_cli
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
quit
echo $password | sudo -S phc_ctl /dev/ptp0 set 10
EOF
}

function test_8021qbv_11_2_tsn_pcie(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
echo $password | sudo -S phc_ctl /dev/ptp0 set 0
soce_cli
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
exit
echo $password | sudo -S phc_ctl /dev/ptp0 set 10
EOF
}

function test_8021qbv_11_3(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
echo $password | sudo -S phc_ctl /dev/ptp0 set 0
soce_cli
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
quit
echo $password | sudo -S phc_ctl /dev/ptp0 set 20
EOF
}

function test_8021qbv_11_3_tsn_pcie(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
echo $password | sudo -S phc_ctl /dev/ptp0 set 0
soce_cli
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
exit
echo $password | sudo -S phc_ctl /dev/ptp0 set 20
EOF
}

function test_8021qbv_11_4(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
echo $password | sudo -S phc_ctl /dev/ptp0 set 0
soce_cli
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
quit
echo $password | sudo -S phc_ctl /dev/ptp0 set 30
EOF
}

function test_8021qbv_11_4_tsn_pcie(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
echo $password | sudo -S phc_ctl /dev/ptp0 set 0
soce_cli
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
exit
echo $password | sudo -S phc_ctl /dev/ptp0 set 30
EOF
}

#-----------------------------------------------------------------------------------------------------------------------------------------
# Test 8021Qbv.12 – Qbv jitter measurement
#-----------------------------------------------------------------------------------------------------------------------------------------


#-----------------------------------------------------------------------------------------------------------------------------------------
# Test 8021Qbv.13 – PTP timer change
#-----------------------------------------------------------------------------------------------------------------------------------------

function test_8021qbv_13_1(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
ieee8021qbv set_8021as_timer $port_1_config 1
EOF
}

function test_8021qbv_13_1_restore(){

    8021qbv_reset
}

function test_8021qbv_13_2(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
echo $password | sudo -S phc_ctl /dev/ptp1 set 0
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

function test_8021qbv_13_2_restore(){

    8021qbv_reset
}

function test_8021qbv_13_3(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
echo $password | sudo -S phc_ctl /dev/ptp1 set 10000
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
ieee8021qbv change_current_configuration $port_1_config ${test_function}.json
EOF
}

function test_8021qbv_13_3_restore(){

    8021qbv_reset
}
