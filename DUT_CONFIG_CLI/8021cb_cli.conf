#!/bin/bash


function 8021cb_reset(){

cat <<-EOF > cmds/${test_function}_dut_config_restore.cmd
echo $password | sudo -S cp /etc/soce_design/factory_config/SWITCH/ieee802_1cb.json /etc/soce_configs/current/SWITCH/ieee802_1cb.json
echo $password | sudo -S cp /etc/soce_design/factory_config/SWITCH/active_stream_translation.json /etc/soce_configs/current/SWITCH/active_stream_translation.json
echo $password | sudo -S cp /etc/soce_design/factory_config/SWITCH/stream_identification.json /etc/soce_configs/current/SWITCH/stream_identification.json
soce_cli
vlan reset SWITCH
frer reload_configuration SWITCH
active_stream_translation reload_configuration SWITCH
stream_identification reload_configuration SWITCH
frer reset_port_statistics $port_0_config
frer reset_port_statistics $port_1_config
EOF
}

function 8021cb_reset_tsn_pcie(){

cat <<-EOF > cmds/${test_function}_dut_config_restore.cmd
echo $password | sudo -S cp /etc/soce_design/factory_config/SWITCH/ieee802_1cb.json /etc/soce_configs/current/SWITCH/ieee802_1cb.json
echo $password | sudo -S cp /etc/soce_design/factory_config/SWITCH/active_stream_translation.json /etc/soce_configs/current/SWITCH/active_stream_translation.json
echo $password | sudo -S cp /etc/soce_design/factory_config/SWITCH/stream_identification.json /etc/soce_configs/current/SWITCH/stream_identification.json
soce_cli
vlan reset SWITCH
frer reload_configuration SWITCH
active_stream_translation reload_configuration SWITCH
stream_identification reload_configuration SWITCH
EOF
}


function 8021cb_lldp_reset(){

cat <<-EOF > cmds/${test_function}_dut_config_restore.cmd
echo $password | sudo -S cp /etc/soce_design/factory_config/SWITCH/ieee802_1cb.json /etc/soce_configs/current/SWITCH/ieee802_1cb.json
echo $password | sudo -S cp /etc/soce_design/factory_config/SWITCH/active_stream_translation.json /etc/soce_configs/current/SWITCH/active_stream_translation.json
echo $password | sudo -S cp /etc/soce_design/factory_config/SWITCH/stream_identification.json /etc/soce_configs/current/SWITCH/stream_identification.json
echo $password | sudo -S service lldpd restart
soce_cli
vlan reset SWITCH
frer reload_configuration SWITCH
active_stream_translation reload_configuration SWITCH
stream_identification reload_configuration SWITCH
frer reset_port_statistics $port_0_config
frer reset_port_statistics $port_1_config
EOF
}

#-----------------------------------------------------------------------------------------------------------------------------------------
# Test 8021CB.1 – Sequence encode
#-----------------------------------------------------------------------------------------------------------------------------------------

function test_8021cb_1_1(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_entry SWITCH 1 1 $port_0_config,$port_1_config,$port_2_config,$port_3_config ""
vlan set_vlan_entry SWITCH 2 2 $port_0_config,$port_1_config,$port_2_config,$port_3_config ""
vlan set_vlan_entry SWITCH 3 3 $port_0_config,$port_1_config,$port_2_config,$port_3_config ""
vlan set_vlan_entry SWITCH 4 4 $port_0_config,$port_1_config,$port_2_config,$port_3_config ""
stream_identification set_active_stream_id SWITCH 2 0 00:12:01:00:00:01 1 0 tagged
stream_identification set_active_stream_id SWITCH 2 1 00:12:01:00:00:01 2 0 tagged
stream_identification set_active_stream_id SWITCH 2 2 00:12:01:00:00:01 3 0 tagged
stream_identification set_active_stream_id SWITCH 2 3 00:12:01:00:00:01 4 0 tagged
frer enable_global_frer SWITCH
frer set_recovery_params SWITCH 0 enabled match 8 100 enabled
frer set_recovery_params SWITCH 1 enabled match 8 100 enabled
frer set_recovery_params SWITCH 2 enabled match 8 100 enabled
frer set_recovery_params SWITCH 3 disabled match 8 100 enabled
frer reset_port_statistics $port_0_config
frer reset_port_statistics $port_1_config
EOF
}

function test_8021cb_1_1_tsn_pcie(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_entry SWITCH 1 1 $port_0_config,$port_1_config ""
vlan set_vlan_entry SWITCH 2 2 $port_0_config,$port_1_config ""
vlan set_vlan_entry SWITCH 3 3 $port_0_config,$port_1_config ""
vlan set_vlan_entry SWITCH 4 4 $port_0_config,$port_1_config ""
vlan set_vlan_port $port_pcie_name 10 0 0 access all none original none none
vlan set_vlan_port $internal_port_name 10 0 0 access all none original none none
vlan set_vlan_entry SWITCH 10 10 $port_pcie_name,$internal_port_name ""
stream_identification set_active_stream_id SWITCH 0 00:12:01:00:00:01 1 0 tagged
stream_identification set_active_stream_id SWITCH 1 00:12:01:00:00:01 2 0 tagged
stream_identification set_active_stream_id SWITCH 2 00:12:01:00:00:01 3 0 tagged
stream_identification set_active_stream_id SWITCH 3 00:12:01:00:00:01 4 0 tagged
frer enable_global_frer SWITCH
frer set_recovery_params SWITCH 0 enabled match 8 100 enabled
frer set_recovery_params SWITCH 1 enabled match 8 100 enabled
frer set_recovery_params SWITCH 2 enabled match 8 100 enabled
frer set_recovery_params SWITCH 3 disabled match 8 100 enabled
EOF
}

# Stream Identification without table id parameter !! -> TSN-BRIDGE

# function test_8021cb_1_1(){
# cat <<-EOF > cmds/${test_function}_dut_config.cmd
# soce_cli
# vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
# vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
# vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
# vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
# vlan set_vlan_entry SWITCH 1 1 $port_0_config,$port_1_config,$port_2_config,$port_3_config ""
# vlan set_vlan_entry SWITCH 2 2 $port_0_config,$port_1_config,$port_2_config,$port_3_config ""
# vlan set_vlan_entry SWITCH 3 3 $port_0_config,$port_1_config,$port_2_config,$port_3_config ""
# vlan set_vlan_entry SWITCH 4 4 $port_0_config,$port_1_config,$port_2_config,$port_3_config ""
# stream_identification set_active_stream_id SWITCH 0 00:12:01:00:00:01 1 0 tagged
# stream_identification set_active_stream_id SWITCH 1 00:12:01:00:00:01 2 0 tagged
# stream_identification set_active_stream_id SWITCH 2 00:12:01:00:00:01 3 0 tagged
# stream_identification set_active_stream_id SWITCH 3 00:12:01:00:00:01 4 0 tagged
# frer enable_global_frer SWITCH
# frer set_recovery_params SWITCH 0 enabled match 8 100 enabled
# frer set_recovery_params SWITCH 1 enabled match 8 100 enabled
# frer set_recovery_params SWITCH 2 enabled match 8 100 enabled
# frer set_recovery_params SWITCH 3 disabled match 8 100 enabled
# EOF
# }

function test_8021cb_1_1_restore(){

    8021cb_reset
}

function test_8021cb_1_1_restore_tsn_pcie(){

    8021cb_reset_tsn_pcie
}


#-----------------------------------------------------------------------------------------------------------------------------------------
# Test 8021CB.2 – Sequence decode
#-----------------------------------------------------------------------------------------------------------------------------------------

function test_8021cb_2_1(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_entry SWITCH 1 1 $port_0_config,$port_1_config,$port_2_config,$port_3_config ""
vlan set_vlan_entry SWITCH 2 2 $port_0_config,$port_1_config,$port_2_config,$port_3_config ""
vlan set_vlan_entry SWITCH 3 3 $port_0_config,$port_1_config,$port_2_config,$port_3_config ""
vlan set_vlan_entry SWITCH 4 4 $port_0_config,$port_1_config,$port_2_config,$port_3_config ""
stream_identification set_active_stream_id SWITCH 2 0 00:12:01:00:00:01 1 0 tagged
stream_identification set_active_stream_id SWITCH 2 1 00:12:01:00:00:01 2 0 tagged
stream_identification set_active_stream_id SWITCH 2 2 00:12:01:00:00:01 3 0 tagged
stream_identification set_active_stream_id SWITCH 2 3 00:12:01:00:00:01 0 0 tagged
frer enable_global_frer SWITCH
frer set_recovery_params SWITCH 0 enabled match 8 100 enabled
frer set_recovery_params SWITCH 1 enabled match 8 100 enabled
frer set_recovery_params SWITCH 2 enabled match 8 100 enabled
frer set_recovery_params SWITCH 3 enabled match 8 100 enabled
frer set_proxy_ports SWITCH $port_1_config
EOF
}

function test_8021cb_2_1_tsn_pcie(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_entry SWITCH 1 1 $port_0_config,$port_1_config ""
vlan set_vlan_entry SWITCH 2 2 $port_0_config,$port_1_config ""
vlan set_vlan_entry SWITCH 3 3 $port_0_config,$port_1_config ""
vlan set_vlan_entry SWITCH 4 4 $port_0_config,$port_1_config ""
vlan set_vlan_port $port_pcie_name 10 0 0 access all none original none none
vlan set_vlan_port $internal_port_name 10 0 0 access all none original none none
vlan set_vlan_entry SWITCH 10 10 $port_pcie_name,$internal_port_name ""
stream_identification set_active_stream_id SWITCH 0 00:12:01:00:00:01 1 0 tagged
stream_identification set_active_stream_id SWITCH 1 00:12:01:00:00:01 2 0 tagged
stream_identification set_active_stream_id SWITCH 2 00:12:01:00:00:01 3 0 tagged
stream_identification set_active_stream_id SWITCH 3 00:12:01:00:00:01 0 0 tagged
frer enable_global_frer SWITCH
frer set_recovery_params SWITCH 0 enabled match 8 100 enabled
frer set_recovery_params SWITCH 1 enabled match 8 100 enabled
frer set_recovery_params SWITCH 2 enabled match 8 100 enabled
frer set_recovery_params SWITCH 3 enabled match 8 100 enabled
frer set_proxy_ports SWITCH $port_1_config
EOF
}

# Stream Identification without table id parameter !! -> TSN-BRIDGE

# function test_8021cb_2_1(){
# cat <<-EOF > cmds/${test_function}_dut_config.cmd
# soce_cli
# vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
# vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
# vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
# vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
# vlan set_vlan_entry SWITCH 1 1 $port_0_config,$port_1_config,$port_2_config,$port_3_config ""
# vlan set_vlan_entry SWITCH 2 2 $port_0_config,$port_1_config,$port_2_config,$port_3_config ""
# vlan set_vlan_entry SWITCH 3 3 $port_0_config,$port_1_config,$port_2_config,$port_3_config ""
# vlan set_vlan_entry SWITCH 4 4 $port_0_config,$port_1_config,$port_2_config,$port_3_config ""
# stream_identification set_active_stream_id SWITCH 0 00:12:01:00:00:01 1 0 tagged
# stream_identification set_active_stream_id SWITCH 1 00:12:01:00:00:01 2 0 tagged
# stream_identification set_active_stream_id SWITCH 2 00:12:01:00:00:01 3 0 tagged
# stream_identification set_active_stream_id SWITCH 3 00:12:01:00:00:01 0 0 tagged
# frer enable_global_frer SWITCH
# frer set_recovery_params SWITCH 0 enabled match 8 100 enabled
# frer set_recovery_params SWITCH 1 enabled match 8 100 enabled
# frer set_recovery_params SWITCH 2 enabled match 8 100 enabled
# frer set_recovery_params SWITCH 3 enabled match 8 100 enabled
# frer set_proxy_ports SWITCH $port_1_config
# EOF
# }

function test_8021cb_2_1_restore(){

    8021cb_reset
}

function test_8021cb_2_1_restore_tsn_pcie(){

    8021cb_reset_tsn_pcie
}

#-----------------------------------------------------------------------------------------------------------------------------------------
# Test 8021CB.3 – Individual Recovery
#-----------------------------------------------------------------------------------------------------------------------------------------

function test_8021cb_3_1(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_entry SWITCH 10 10 $port_0_config,$port_1_config,$port_2_config,$port_3_config ""
vlan set_vlan_entry SWITCH 20 20 $port_0_config,$port_1_config,$port_2_config,$port_3_config ""
stream_identification set_active_stream_id SWITCH 2 0 00:12:01:00:00:01 10 0 tagged
stream_identification set_active_stream_id SWITCH 2 1 00:12:01:00:00:01 20 0 tagged
frer enable_global_frer SWITCH
frer set_recovery_params SWITCH 0 enabled match 8 100 enabled
frer set_recovery_params SWITCH 1 enabled match 8 100 enabled
EOF
}

function test_8021cb_3_1_tsn_pcie(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_entry SWITCH 10 10 $port_0_config,$port_1_config ""
vlan set_vlan_entry SWITCH 20 20 $port_0_config,$port_1_config ""
vlan set_vlan_port $port_pcie_name 100 0 0 access all none original none none
vlan set_vlan_port $internal_port_name 100 0 0 access all none original none none
vlan set_vlan_entry SWITCH 100 100 $port_pcie_name,$internal_port_name ""
stream_identification set_active_stream_id SWITCH 0 00:12:01:00:00:01 10 0 tagged
stream_identification set_active_stream_id SWITCH 1 00:12:01:00:00:01 20 0 tagged
frer enable_global_frer SWITCH
frer set_recovery_params SWITCH 0 enabled match 8 100 enabled
frer set_recovery_params SWITCH 1 enabled match 8 100 enabled
EOF
}

# Stream Identification without table id parameter !! -> TSN-BRIDGE

# function test_8021cb_3_1(){
# cat <<-EOF > cmds/${test_function}_dut_config.cmd
# soce_cli
# vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
# vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
# vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
# vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
# vlan set_vlan_entry SWITCH 10 10 $port_0_config,$port_1_config,$port_2_config,$port_3_config ""
# vlan set_vlan_entry SWITCH 20 20 $port_0_config,$port_1_config,$port_2_config,$port_3_config ""
# stream_identification set_active_stream_id SWITCH 0 00:12:01:00:00:01 10 0 tagged
# stream_identification set_active_stream_id SWITCH 1 00:12:01:00:00:01 20 0 tagged
# frer enable_global_frer SWITCH
# frer set_recovery_params SWITCH 0 enabled match 8 100 enabled
# frer set_recovery_params SWITCH 1 enabled match 8 100 enabled
# EOF
# }

function test_8021cb_3_1_restore(){

    8021cb_reset
}

function test_8021cb_3_1_restore_tsn_pcie(){

    8021cb_reset_tsn_pcie
}


function test_8021cb_3_2(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_entry SWITCH 10 10 $port_0_config,$port_1_config,$port_2_config,$port_3_config ""
vlan set_vlan_entry SWITCH 20 20 $port_0_config,$port_1_config,$port_2_config,$port_3_config ""
stream_identification set_active_stream_id SWITCH 2 0 00:12:01:00:00:01 10 0 tagged
stream_identification set_active_stream_id SWITCH 2 1 00:12:01:00:00:01 20 0 tagged
frer enable_global_frer SWITCH
frer set_recovery_params SWITCH 0 enabled vector 5 100 enabled
frer set_recovery_params SWITCH 1 enabled vector 5 100 enabled
EOF
}

function test_8021cb_3_2_tsn_pcie(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_entry SWITCH 10 10 $port_0_config,$port_1_config ""
vlan set_vlan_entry SWITCH 20 20 $port_0_config,$port_1_config ""
vlan set_vlan_port $port_pcie_name 100 0 0 access all none original none none
vlan set_vlan_port $internal_port_name 100 0 0 access all none original none none
vlan set_vlan_entry SWITCH 100 100 $port_pcie_name,$internal_port_name ""
stream_identification set_active_stream_id SWITCH 0 00:12:01:00:00:01 10 0 tagged
stream_identification set_active_stream_id SWITCH 1 00:12:01:00:00:01 20 0 tagged
frer enable_global_frer SWITCH
frer set_recovery_params SWITCH 0 enabled vector 8 100 enabled
frer set_recovery_params SWITCH 1 enabled vector 8 100 enabled
EOF
}

# Stream Identification without table id parameter !! -> TSN-BRIDGE

# function test_8021cb_3_2(){
# cat <<-EOF > cmds/${test_function}_dut_config.cmd
# soce_cli
# vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
# vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
# vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
# vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
# vlan set_vlan_entry SWITCH 10 10 $port_0_config,$port_1_config,$port_2_config,$port_3_config ""
# vlan set_vlan_entry SWITCH 20 20 $port_0_config,$port_1_config,$port_2_config,$port_3_config ""
# stream_identification set_active_stream_id SWITCH 0 00:12:01:00:00:01 10 0 tagged
# stream_identification set_active_stream_id SWITCH 1 00:12:01:00:00:01 20 0 tagged
# frer enable_global_frer SWITCH
# frer set_recovery_params SWITCH 0 enabled vector 5 100 enabled
# frer set_recovery_params SWITCH 1 enabled vector 5 100 enabled
# EOF
# }

function test_8021cb_3_2_restore(){

    8021cb_reset
}

function test_8021cb_3_2_restore_tsn_pcie(){

    8021cb_reset_tsn_pcie
}

#-----------------------------------------------------------------------------------------------------------------------------------------
# Test 8021CB.4 – Sequence Recovery
#-----------------------------------------------------------------------------------------------------------------------------------------

function test_8021cb_4_1(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_entry SWITCH 10 10 $port_0_config,$port_1_config,$port_2_config,$port_3_config ""
vlan set_vlan_entry SWITCH 20 20 $port_0_config,$port_1_config,$port_2_config,$port_3_config ""
stream_identification set_active_stream_id SWITCH 2 0 00:12:01:00:00:01 10 0 tagged
stream_identification set_active_stream_id SWITCH 2 1 00:12:01:00:00:01 20 0 tagged
frer enable_global_frer SWITCH
frer set_recovery_params SWITCH 0 enabled match 8 100 enabled
frer set_recovery_params SWITCH 1 enabled match 8 100 enabled
EOF
}

# Stream Identification without table id parameter !! -> TSN-BRIDGE

# function test_8021cb_4_1(){
# cat <<-EOF > cmds/${test_function}_dut_config.cmd
# soce_cli
# vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
# vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
# vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
# vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
# vlan set_vlan_entry SWITCH 10 10 $port_0_config,$port_1_config,$port_2_config,$port_3_config ""
# vlan set_vlan_entry SWITCH 20 20 $port_0_config,$port_1_config,$port_2_config,$port_3_config ""
# stream_identification set_active_stream_id SWITCH 0 00:12:01:00:00:01 10 0 tagged
# stream_identification set_active_stream_id SWITCH 1 00:12:01:00:00:01 20 0 tagged
# frer enable_global_frer SWITCH
# frer set_recovery_params SWITCH 0 enabled match 8 100 enabled
# frer set_recovery_params SWITCH 1 enabled match 8 100 enabled
# EOF
# }

function test_8021cb_4_1_restore(){

    8021cb_reset
}

function test_8021cb_4_1_restore_tsn_pcie(){

    8021cb_reset_tsn_pcie
}

function test_8021cb_4_2(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_entry SWITCH 10 10 $port_0_config,$port_1_config,$port_2_config,$port_3_config ""
vlan set_vlan_entry SWITCH 20 20 $port_0_config,$port_1_config,$port_2_config,$port_3_config ""
stream_identification set_active_stream_id SWITCH 2 0 00:12:01:00:00:01 10 0 tagged
stream_identification set_active_stream_id SWITCH 2 1 00:12:01:00:00:01 20 0 tagged
frer enable_global_frer SWITCH
frer set_recovery_params SWITCH 0 enabled vector 5 100 enabled
frer set_recovery_params SWITCH 1 enabled vector 5 100 enabled
EOF
}

# Stream Identification without table id parameter !! -> TSN-BRIDGE

# function test_8021cb_4_2(){
# cat <<-EOF > cmds/${test_function}_dut_config.cmd
# soce_cli
# vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
# vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
# vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
# vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
# vlan set_vlan_entry SWITCH 10 10 $port_0_config,$port_1_config,$port_2_config,$port_3_config ""
# vlan set_vlan_entry SWITCH 20 20 $port_0_config,$port_1_config,$port_2_config,$port_3_config ""
# stream_identification set_active_stream_id SWITCH 0 00:12:01:00:00:01 10 0 tagged
# stream_identification set_active_stream_id SWITCH 1 00:12:01:00:00:01 20 0 tagged
# frer enable_global_frer SWITCH
# frer set_recovery_params SWITCH 0 enabled vector 5 100 enabled
# frer set_recovery_params SWITCH 1 enabled vector 5 100 enabled
# EOF
# }

function test_8021cb_4_2_restore(){

    8021cb_reset
}

function test_8021cb_4_2_restore_tsn_pcie(){

    8021cb_reset_tsn_pcie
}

#-----------------------------------------------------------------------------------------------------------------------------------------
# Test 8021CB.5 – Recovery Reset
#-----------------------------------------------------------------------------------------------------------------------------------------

function test_8021cb_5_1(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_entry SWITCH 10 10 $port_0_config,$port_1_config,$port_2_config,$port_3_config ""
stream_identification set_active_stream_id SWITCH 2 0 00:12:01:00:00:01 10 0 tagged
frer enable_global_frer SWITCH
frer set_recovery_params SWITCH 0 enabled match 5 100 enabled
EOF
}

function test_8021cb_5_1_tsn_pcie(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_entry SWITCH 10 10 $port_0_config,$port_1_config ""
vlan set_vlan_port $port_pcie_name 100 0 0 access all none original none none
vlan set_vlan_port $internal_port_name 100 0 0 access all none original none none
vlan set_vlan_entry SWITCH 100 100 $port_pcie_name,$internal_port_name ""
stream_identification set_active_stream_id SWITCH 0 00:12:01:00:00:01 10 0 tagged
frer enable_global_frer SWITCH
frer set_recovery_params SWITCH 0 enabled match 5 100 enabled
EOF
}

# Stream Identification without table id parameter !! -> TSN-BRIDGE

# function test_8021cb_5_1(){
# cat <<-EOF > cmds/${test_function}_dut_config.cmd
# soce_cli
# vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
# vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
# vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
# vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
# vlan set_vlan_entry SWITCH 10 10 $port_0_config,$port_1_config,$port_2_config,$port_3_config ""
# stream_identification set_active_stream_id SWITCH 0 00:12:01:00:00:01 10 0 tagged
# frer enable_global_frer SWITCH
# frer set_recovery_params SWITCH 0 enabled match 5 100 enabled
# EOF
# }

function test_8021cb_5_1_restore(){

    8021cb_reset
}

function test_8021cb_5_1_restore_tsn_pcie(){

    8021cb_reset_tsn_pcie
}

function test_8021cb_5_2(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_entry SWITCH 10 10 $port_0_config,$port_1_config,$port_2_config,$port_3_config ""
frer recovery_reset SWITCH 0
EOF
}

function test_8021cb_5_2_tsn_pcie(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_entry SWITCH 10 10 $port_0_config,$port_1_config ""
vlan set_vlan_port $port_pcie_name 100 0 0 access all none original none none
vlan set_vlan_port $internal_port_name 100 0 0 access all none original none none
vlan set_vlan_entry SWITCH 100 100 $port_pcie_name,$internal_port_name ""
frer recovery_reset SWITCH 0
EOF
}

function test_8021cb_5_2_restore(){

    8021cb_reset
}

function test_8021cb_5_2_restore_tsn_pcie(){

    8021cb_reset_tsn_pcie
}

#-----------------------------------------------------------------------------------------------------------------------------------------
# Test 8021CB.6 – Recovery Reset time
#-----------------------------------------------------------------------------------------------------------------------------------------

function test_8021cb_6_1(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_entry SWITCH 10 10 $port_0_config,$port_1_config,$port_2_config,$port_3_config ""
stream_identification set_active_stream_id SWITCH 2 0 00:12:01:00:00:01 10 0 tagged
frer enable_global_frer SWITCH
frer set_recovery_params SWITCH 0 enabled match 5 100 enabled
EOF
}

function test_8021cb_6_1_tsn_pcie(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_entry SWITCH 10 10 $port_0_config,$port_1_config ""
vlan set_vlan_port $port_pcie_name 100 0 0 access all none original none none
vlan set_vlan_port $internal_port_name 100 0 0 access all none original none none
vlan set_vlan_entry SWITCH 100 100 $port_pcie_name,$internal_port_name ""
stream_identification set_active_stream_id SWITCH 0 00:12:01:00:00:01 10 0 tagged
frer enable_global_frer SWITCH
frer set_recovery_params SWITCH 0 enabled match 5 100 enabled
EOF
}

# Stream Identification without table id parameter !! -> TSN-BRIDGE

# function test_8021cb_6_1(){
# cat <<-EOF > cmds/${test_function}_dut_config.cmd
# soce_cli
# vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
# vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
# vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
# vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
# vlan set_vlan_entry SWITCH 10 10 $port_0_config,$port_1_config,$port_2_config,$port_3_config ""
# stream_identification set_active_stream_id SWITCH 0 00:12:01:00:00:01 10 0 tagged
# frer enable_global_frer SWITCH
# frer set_recovery_params SWITCH 0 enabled match 5 100 enabled
# EOF
# }

function test_8021cb_6_1_restore(){

    8021cb_reset
}

function test_8021cb_6_1_restore_tsn_pcie(){

    8021cb_reset_tsn_pcie
}

#-----------------------------------------------------------------------------------------------------------------------------------------
# Test 8021CB.7 – Recovery Take no Sequence
#-----------------------------------------------------------------------------------------------------------------------------------------

function test_8021cb_7_1(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_entry SWITCH 10 10 $port_0_config,$port_1_config,$port_2_config,$port_3_config ""
vlan set_vlan_entry SWITCH 20 20 $port_0_config,$port_1_config,$port_2_config,$port_3_config ""
stream_identification set_active_stream_id SWITCH 2 0 00:12:01:00:00:01 10 0 tagged
stream_identification set_active_stream_id SWITCH 2 1 00:12:01:00:00:01 20 0 tagged
frer enable_global_frer SWITCH
frer set_recovery_params SWITCH 0 enabled match 5 100 enabled
frer set_recovery_params SWITCH 1 enabled match 5 100 disabled
EOF
}

function test_8021cb_7_1_tsn_pcie(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_entry SWITCH 10 10 $port_0_config,$port_1_config ""
vlan set_vlan_entry SWITCH 20 20 $port_0_config,$port_1_config ""
vlan set_vlan_port $port_pcie_name 100 0 0 access all none original none none
vlan set_vlan_port $internal_port_name 100 0 0 access all none original none none
vlan set_vlan_entry SWITCH 100 100 $port_pcie_name,$internal_port_name ""
stream_identification set_active_stream_id SWITCH 0 00:12:01:00:00:01 10 0 tagged
stream_identification set_active_stream_id SWITCH 1 00:12:01:00:00:01 20 0 tagged
frer enable_global_frer SWITCH
frer set_recovery_params SWITCH 0 enabled match 5 100 enabled
frer set_recovery_params SWITCH 1 enabled match 5 100 disabled
EOF
}

# Stream Identification without table id parameter !! -> TSN-BRIDGE

# function test_8021cb_6_1(){
# cat <<-EOF > cmds/${test_function}_dut_config.cmd
# soce_cli
# vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
# vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
# vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
# vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
# vlan set_vlan_entry SWITCH 10 10 $port_0_config,$port_1_config,$port_2_config,$port_3_config ""
# stream_identification set_active_stream_id SWITCH 0 00:12:01:00:00:01 10 0 tagged
# frer enable_global_frer SWITCH
# frer set_recovery_params SWITCH 0 enabled match 5 100 enabled
# EOF
# }

function test_8021cb_7_1_restore(){

    8021cb_reset
}

function test_8021cb_7_1_restore_tsn_pcie(){

    8021cb_reset_tsn_pcie
}

#-----------------------------------------------------------------------------------------------------------------------------------------
# Test 8021CB.8 – Active stream translation (VID)
#-----------------------------------------------------------------------------------------------------------------------------------------

function test_8021cb_8_1(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_entry SWITCH 1 1 $port_0_config,$port_1_config,$port_2_config,$port_3_config ""
vlan set_vlan_entry SWITCH 2 2 $port_0_config,$port_1_config,$port_2_config,$port_3_config ""
vlan set_vlan_entry SWITCH 3 3 $port_0_config,$port_1_config,$port_2_config,$port_3_config ""
vlan set_vlan_entry SWITCH 4 4 $port_0_config,$port_1_config,$port_2_config,$port_3_config ""
vlan set_vlan_entry SWITCH 12 12 $port_0_config,$port_1_config,$port_2_config,$port_3_config ""
vlan set_vlan_entry SWITCH 30 30 $port_0_config,$port_1_config,$port_2_config,$port_3_config ""
stream_identification set_active_stream_id SWITCH 2 0 00:12:01:00:00:01 1 0 tagged
stream_identification set_active_stream_id SWITCH 2 1 00:12:01:00:00:01 2 0 tagged
stream_identification set_active_stream_id SWITCH 2 2 00:12:01:00:00:01 3 0 tagged
stream_identification set_active_stream_id SWITCH 2 3 00:12:01:00:00:01 4 0 tagged
frer enable_global_frer SWITCH
frer set_recovery_params SWITCH 0 enabled match 8 100 enabled
frer set_recovery_params SWITCH 1 enabled match 8 100 enabled
frer set_recovery_params SWITCH 2 enabled match 8 100 enabled
frer set_recovery_params SWITCH 3 enabled match 8 100 enabled
active_stream_translation set_stream_translation_params $port_1_config 0 01:02:03:04:05:06 12 0 0
active_stream_translation set_stream_translation_params $port_1_config 1 01:02:03:04:05:06 12 0 0
active_stream_translation set_stream_translation_params $port_1_config 2 11:11:11:11:11:11 30 0 0
EOF
}

function test_8021cb_8_1_tsn_pcie(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_entry SWITCH 1 1 $port_0_config,$port_1_config ""
vlan set_vlan_entry SWITCH 2 2 $port_0_config,$port_1_config ""
vlan set_vlan_entry SWITCH 3 3 $port_0_config,$port_1_config ""
vlan set_vlan_entry SWITCH 4 4 $port_0_config,$port_1_config ""
vlan set_vlan_entry SWITCH 12 12 $port_0_config,$port_1_config ""
vlan set_vlan_entry SWITCH 30 30 $port_0_config,$port_1_config ""
vlan set_vlan_port $port_pcie_name 100 0 0 access all none original none none
vlan set_vlan_port $internal_port_name 100 0 0 access all none original none none
vlan set_vlan_entry SWITCH 100 100 $port_pcie_name,$internal_port_name ""
stream_identification set_active_stream_id SWITCH 0 00:12:01:00:00:01 1 0 tagged
stream_identification set_active_stream_id SWITCH 1 00:12:01:00:00:01 2 0 tagged
stream_identification set_active_stream_id SWITCH 2 00:12:01:00:00:01 3 0 tagged
stream_identification set_active_stream_id SWITCH 3 00:12:01:00:00:01 4 0 tagged
frer enable_global_frer SWITCH
frer set_recovery_params SWITCH 0 enabled match 8 100 enabled
frer set_recovery_params SWITCH 1 enabled match 8 100 enabled
frer set_recovery_params SWITCH 2 enabled match 8 100 enabled
frer set_recovery_params SWITCH 3 enabled match 8 100 enabled
active_stream_translation set_stream_translation_params $port_1_config 0 01:02:03:04:05:06 12 0 0
active_stream_translation set_stream_translation_params $port_1_config 1 01:02:03:04:05:06 12 0 0
active_stream_translation set_stream_translation_params $port_1_config 2 11:11:11:11:11:11 30 0 0
EOF
}

# Stream Identification without table id parameter !! -> TSN-BRIDGE

# function test_8021cb_8_1(){
# cat <<-EOF > cmds/${test_function}_dut_config.cmd
# soce_cli
# vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
# vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
# vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
# vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
# vlan set_vlan_entry SWITCH 1 1 $port_0_config,$port_1_config,$port_2_config,$port_3_config ""
# vlan set_vlan_entry SWITCH 2 2 $port_0_config,$port_1_config,$port_2_config,$port_3_config ""
# vlan set_vlan_entry SWITCH 3 3 $port_0_config,$port_1_config,$port_2_config,$port_3_config ""
# vlan set_vlan_entry SWITCH 4 4 $port_0_config,$port_1_config,$port_2_config,$port_3_config ""
# vlan set_vlan_entry SWITCH 12 12 $port_0_config,$port_1_config,$port_2_config,$port_3_config ""
# vlan set_vlan_entry SWITCH 30 30 $port_0_config,$port_1_config,$port_2_config,$port_3_config ""
# stream_identification set_active_stream_id SWITCH 0 00:12:01:00:00:01 1 0 tagged
# stream_identification set_active_stream_id SWITCH 1 00:12:01:00:00:01 2 0 tagged
# stream_identification set_active_stream_id SWITCH 2 00:12:01:00:00:01 3 0 tagged
# stream_identification set_active_stream_id SWITCH 3 00:12:01:00:00:01 4 0 tagged
# frer enable_global_frer SWITCH
# frer set_recovery_params SWITCH 0 enabled match 8 100 enabled
# frer set_recovery_params SWITCH 1 enabled match 8 100 enabled
# frer set_recovery_params SWITCH 2 enabled match 8 100 enabled
# frer set_recovery_params SWITCH 3 enabled match 8 100 enabled
# active_stream_translation set_stream_translation_params $port_1_config 0 01:02:03:04:05:06 12 0 0
# active_stream_translation set_stream_translation_params $port_1_config 1 01:02:03:04:05:06 12 0 0
# active_stream_translation set_stream_translation_params $port_1_config 2 11:11:11:11:11:11 30 0 0
# EOF
# }

# active_stream_translation set_stream_translation_params $port_1_config 0 00:12:01:00:00:01 12 0 0
# active_stream_translation set_stream_translation_params $port_1_config 1 00:12:01:00:00:01 12 0 0
# active_stream_translation set_stream_translation_params $port_1_config 2 00:12:01:00:00:01 30 0 0

# active_stream_translation set_stream_translation_params $port_1_config 0 01:02:03:04:05:06 12 0 0
# active_stream_translation set_stream_translation_params $port_1_config 1 01:02:03:04:05:06 12 0 0
# active_stream_translation set_stream_translation_params $port_1_config 2 11:11:11:11:11:11 30 0 0

function test_8021cb_8_1_restore(){

    8021cb_reset
}

function test_8021cb_8_1_restore_tsn_pcie(){

    8021cb_reset_tsn_pcie
}

#-----------------------------------------------------------------------------------------------------------------------------------------
# Test 802.1CB .9 – Recovery History Length
#-----------------------------------------------------------------------------------------------------------------------------------------

function test_8021cb_9_1(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_entry SWITCH 10 10 $port_0_config,$port_1_config,$port_2_config,$port_3_config ""
stream_identification set_active_stream_id SWITCH 2 0 00:12:01:00:00:01 10 0 tagged
frer enable_global_frer SWITCH
frer set_recovery_params SWITCH 0 enabled vector 5 100 enabled
EOF
}

function test_8021cb_9_1_tsn_pcie(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_entry SWITCH 10 10 $port_0_config,$port_1_config ""
vlan set_vlan_port $port_pcie_name 100 0 0 access all none original none none
vlan set_vlan_port $internal_port_name 100 0 0 access all none original none none
vlan set_vlan_entry SWITCH 100 100 $port_pcie_name,$internal_port_name ""
stream_identification set_active_stream_id SWITCH 0 00:12:01:00:00:01 10 0 tagged
frer enable_global_frer SWITCH
frer set_recovery_params SWITCH 0 enabled vector 5 100 enabled
EOF
}

# Stream Identification without table id parameter !! -> TSN-BRIDGE

# function test_8021cb_9_1(){
# cat <<-EOF > cmds/${test_function}_dut_config.cmd
# soce_cli
# vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
# vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
# vlan set_vlan_port $port_2_config 1 0 0 trunk all tag-all original none none
# vlan set_vlan_port $port_3_config 1 0 0 trunk all tag-all original none none
# vlan set_vlan_entry SWITCH 10 10 $port_0_config,$port_1_config,$port_2_config,$port_3_config ""
# stream_identification set_active_stream_id SWITCH 0 00:12:01:00:00:01 10 0 tagged
# frer enable_global_frer SWITCH
# frer set_recovery_params SWITCH 0 enabled vector 5 100 enabled
# EOF
# }

function test_8021cb_9_1_restore(){

    8021cb_reset
}

function test_8021cb_9_1_restore_tsn_pcie(){

    8021cb_reset_tsn_pcie
}

#-----------------------------------------------------------------------------------------------------------------------------------------
# Test 802.1CB .10 – FRER statistics
#-----------------------------------------------------------------------------------------------------------------------------------------


function test_8021cb_10_1(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_entry SWITCH 1 1 $port_0_config,$port_1_config ""
vlan set_vlan_entry SWITCH 2 2 $port_0_config,$port_1_config ""
stream_identification set_active_stream_id SWITCH 2 0 00:12:01:00:00:01 1 0 tagged
frer enable_global_frer SWITCH
frer set_recovery_params SWITCH 0 enabled match 8 100 enabled
frer reset_port_statistics $port_0_config
frer reset_port_statistics $port_1_config
EOF
}

function test_8021cb_10_1_restore(){

    8021cb_reset
}

function test_8021cb_10_1_restore_tsn_pcie(){

    8021cb_reset_tsn_pcie
}

function test_8021cb_10_2(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_entry SWITCH 1 1 $port_0_config,$port_1_config ""
vlan set_vlan_entry SWITCH 2 2 $port_0_config,$port_1_config ""
stream_identification set_active_stream_id SWITCH 2 0 00:12:01:00:00:01 1 0 tagged
frer enable_global_frer SWITCH
frer set_recovery_params SWITCH 0 enabled match 8 100 enabled
frer reset_port_statistics $port_0_config
frer reset_port_statistics $port_1_config
EOF
}

function test_8021cb_10_2_restore(){

    8021cb_reset
}

function test_8021cb_10_2_restore_tsn_pcie(){

    8021cb_reset_tsn_pcie
}

function test_8021cb_10_3(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_entry SWITCH 1 1 $port_0_config,$port_1_config ""
vlan set_vlan_entry SWITCH 2 2 $port_0_config,$port_1_config ""
stream_identification set_active_stream_id SWITCH 2 0 00:12:01:00:00:01 1 0 tagged
frer enable_global_frer SWITCH
frer set_recovery_params SWITCH 0 enabled match 8 100 enabled
frer reset_port_statistics $port_0_config
frer reset_port_statistics $port_1_config
EOF
}

function test_8021cb_10_3_restore(){

    8021cb_reset
}

function test_8021cb_10_3_restore_tsn_pcie(){

    8021cb_reset_tsn_pcie
}

function test_8021cb_10_4(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_entry SWITCH 1 1 $port_0_config,$port_1_config ""
vlan set_vlan_entry SWITCH 2 2 $port_0_config,$port_1_config ""
stream_identification set_active_stream_id SWITCH 2 0 00:12:01:00:00:01 1 0 tagged
frer enable_global_frer SWITCH
frer set_recovery_params SWITCH 0 enabled match 8 100 enabled
frer reset_port_statistics $port_0_config
frer reset_port_statistics $port_1_config
EOF
}

function test_8021cb_10_4_restore(){

    8021cb_reset
}

function test_8021cb_10_4_restore_tsn_pcie(){

    8021cb_reset_tsn_pcie
}

function test_8021cb_10_5(){
cat <<-EOF > cmds/${test_function}_dut_config.cmd
soce_cli
vlan set_vlan_port $port_0_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_port $port_1_config 1 0 0 trunk all tag-all original none none
vlan set_vlan_entry SWITCH 1 1 $port_0_config,$port_1_config ""
vlan set_vlan_entry SWITCH 2 2 $port_0_config,$port_1_config ""
stream_identification set_active_stream_id SWITCH 2 0 00:12:01:00:00:01 1 0 tagged
frer enable_global_frer SWITCH
frer set_recovery_params SWITCH 0 enabled vector 5 3 enabled
frer reset_port_statistics $port_0_config
frer reset_port_statistics $port_1_config
EOF
}

function test_8021cb_10_5_restore(){

    8021cb_reset
}

function test_8021cb_10_5_restore_tsn_pcie(){

    8021cb_reset_tsn_pcie
}